<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VibeLive Integration Guide</title>
<link rel="icon" type="image/png" href="/favicon-vibelive.png">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#060606;
  --bg-card:#0e0e0e;
  --bg-code:#0a0a0a;
  --border:#1a1a1a;
  --border-accent:rgba(14,165,164,.18);
  --text:#e2e8f0;
  --text-muted:#8896a8;
  --text-dim:#5a6578;
  --accent:#0EA5A4;
  --accent-hover:#14b8a6;
  --accent-soft:rgba(14,165,164,.10);
  --radius:10px;
  --font:-apple-system,system-ui,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
  --mono:'SF Mono','Fira Code','Fira Mono',Menlo,Consolas,monospace;
  --header-h:56px;
  --toc-w:240px;
}
html{scroll-behavior:smooth;scroll-padding-top:calc(var(--header-h) + 24px)}
body{background:var(--bg);color:var(--text);font-family:var(--font);font-size:15px;line-height:1.7;-webkit-font-smoothing:antialiased}

/* ── Header ── */
.site-header{position:sticky;top:0;z-index:100;height:var(--header-h);background:rgba(6,6,6,.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 24px}
.site-header .inner{max-width:1200px;width:100%;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
.site-header .logo{font-size:16px;font-weight:700;color:var(--text);text-decoration:none;letter-spacing:-.02em}
.site-header .logo span{color:var(--accent)}
.site-header nav{display:flex;gap:24px}
.site-header nav a{font-size:13px;color:var(--text-muted);text-decoration:none;font-weight:500;transition:color .15s}
.site-header nav a:hover{color:var(--accent)}

/* ── Layout ── */
.layout{max-width:1200px;margin:0 auto;display:flex;gap:0;position:relative}

/* ── TOC ── */
.toc-sidebar{position:sticky;top:calc(var(--header-h) + 24px);align-self:flex-start;width:var(--toc-w);min-width:var(--toc-w);height:calc(100vh - var(--header-h) - 48px);overflow-y:auto;padding:24px 0 24px 24px;display:block}
.toc-sidebar::-webkit-scrollbar{width:3px}
.toc-sidebar::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.toc-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--text-dim);margin-bottom:12px}
.toc-sidebar ol{list-style:none;padding:0}
.toc-sidebar li{margin-bottom:2px}
.toc-sidebar a{display:block;font-size:12.5px;color:var(--text-muted);text-decoration:none;padding:3px 10px;border-left:2px solid transparent;border-radius:0 4px 4px 0;transition:all .15s;line-height:1.45}
.toc-sidebar a:hover{color:var(--text);background:var(--accent-soft)}
.toc-sidebar a.active{color:var(--accent);border-left-color:var(--accent);background:var(--accent-soft)}
.toc-sidebar .toc-h3{padding-left:22px;font-size:12px}

/* ── Mobile TOC ── */
.toc-mobile{display:none;padding:12px 20px;border-bottom:1px solid var(--border);background:var(--bg)}
.toc-toggle{background:var(--bg-card);border:1px solid var(--border);color:var(--text-muted);font-size:13px;padding:8px 14px;border-radius:8px;cursor:pointer;width:100%;text-align:left;display:flex;align-items:center;justify-content:space-between;font-family:var(--font)}
.toc-toggle svg{width:16px;height:16px;transition:transform .2s}
.toc-toggle.open svg{transform:rotate(180deg)}
.toc-dropdown{max-height:0;overflow:hidden;transition:max-height .25s ease}
.toc-dropdown.open{max-height:60vh;overflow-y:auto}
.toc-dropdown ol{list-style:none;padding:8px 0}
.toc-dropdown a{display:block;font-size:13px;color:var(--text-muted);text-decoration:none;padding:6px 14px;transition:color .15s}
.toc-dropdown a:hover{color:var(--accent)}
.toc-dropdown .toc-h3{padding-left:28px;font-size:12.5px}

/* ── Content ── */
.content{flex:1;min-width:0;padding:32px 48px 80px 48px;max-width:calc(100% - var(--toc-w))}

/* ── Typography ── */
.content h1{font-size:30px;font-weight:700;color:var(--text);margin:0 0 8px;letter-spacing:-.03em;line-height:1.25}
.content h1+p{color:var(--text-muted);font-size:15px;margin-bottom:32px}
.content h2{font-size:22px;font-weight:700;color:var(--text);margin:48px 0 16px;padding-top:24px;border-top:1px solid var(--border);letter-spacing:-.02em;line-height:1.3}
.content h2:first-of-type{border-top:none;margin-top:24px}
.content h3{font-size:17px;font-weight:600;color:var(--text);margin:32px 0 12px;line-height:1.35}
.content h4{font-size:14px;font-weight:600;color:var(--text);margin:24px 0 8px}
.content p{margin:0 0 16px;color:var(--text)}
.content strong{color:#fff;font-weight:600}
.content em{color:var(--text-muted);font-style:italic}
.content a{color:var(--accent);text-decoration:none;border-bottom:1px solid rgba(14,165,164,.25);transition:border-color .15s}
.content a:hover{border-color:var(--accent)}
.content hr{border:none;height:1px;background:var(--border);margin:40px 0}

/* ── Heading anchors ── */
.heading-anchor{color:var(--text-dim);text-decoration:none;margin-left:6px;opacity:0;transition:opacity .15s;font-weight:400;border:none!important}
h2:hover .heading-anchor,h3:hover .heading-anchor{opacity:1}
.heading-anchor:hover{color:var(--accent)}

/* ── Lists ── */
.content ul,.content ol{margin:0 0 16px;padding-left:24px}
.content li{margin-bottom:6px;color:var(--text)}
.content li::marker{color:var(--text-dim)}

/* ── Blockquotes ── */
.content blockquote{margin:16px 0;padding:14px 18px;border-left:3px solid var(--accent);background:var(--accent-soft);border-radius:0 var(--radius) var(--radius) 0}
.content blockquote p{margin:0 0 8px;color:var(--text-muted);font-size:14px}
.content blockquote p:last-child{margin:0}
.content blockquote strong{color:var(--text)}

/* ── Tables ── */
.content table{width:100%;border-collapse:collapse;margin:16px 0 24px;font-size:13.5px}
.content thead th{text-align:left;padding:10px 14px;background:var(--bg-card);border:1px solid var(--border);font-weight:600;color:var(--text);font-size:12.5px}
.content tbody td{padding:9px 14px;border:1px solid var(--border);color:var(--text-muted);vertical-align:top}
.content tbody tr:hover{background:rgba(255,255,255,.015)}

/* ── Inline code ── */
.content code{font-family:var(--mono);font-size:.88em;background:rgba(14,165,164,.08);color:#b8d4d4;padding:2px 6px;border-radius:4px}

/* ── Code blocks ── */
.code-block{position:relative;margin:16px 0 24px;border-radius:var(--radius);border:1px solid var(--border);background:var(--bg-code);overflow:hidden}
.code-block-header{display:flex;align-items:center;justify-content:space-between;padding:0 14px;height:36px;background:rgba(255,255,255,.025);border-bottom:1px solid var(--border)}
.code-block-lang{font-family:var(--mono);font-size:11px;color:var(--text-dim);text-transform:uppercase;letter-spacing:.04em}
.copy-btn{background:none;border:1px solid var(--border);color:var(--text-muted);font-size:11px;font-family:var(--mono);padding:3px 10px;border-radius:5px;cursor:pointer;transition:all .15s}
.copy-btn:hover{border-color:var(--accent);color:var(--accent)}
.copy-btn.copied{border-color:var(--accent);color:var(--accent);background:var(--accent-soft)}
.code-block pre{margin:0;padding:16px;overflow-x:auto;font-family:var(--mono);font-size:13px;line-height:1.6;color:#c8d6d6}
.code-block pre::-webkit-scrollbar{height:5px}
.code-block pre::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.code-block pre code{background:none;padding:0;border-radius:0;color:inherit;font-size:inherit}

/* ── Part divider ── */
.content h1~hr+hr+h1,.content .part-divider{margin-top:64px;padding-top:32px;border-top:2px solid var(--accent);font-size:28px}

/* ── Footer ── */
.site-footer{border-top:1px solid var(--border);padding:20px 24px;text-align:center}
.site-footer p{font-size:12px;color:var(--text-dim)}

/* ── Responsive ── */
@media(max-width:900px){
  .toc-sidebar{display:none}
  .toc-mobile{display:block}
  .content{max-width:100%;padding:24px 20px 64px}
  .content h1{font-size:24px}
  .content h2{font-size:19px}
  .layout{flex-direction:column}
}
@media(min-width:901px){
  .toc-mobile{display:none!important}
}

/* ── Loading ── */
.loading{display:flex;align-items:center;justify-content:center;min-height:60vh;flex-direction:column;gap:16px}
.loading .spinner{width:32px;height:32px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading p{font-size:14px;color:var(--text-dim)}
</style>
</head>
<body>

<!-- Header -->
<header class="site-header">
  <div class="inner">
    <a href="https://home.vibelive.site/" class="logo">Vibe<span>Live</span></a>
    <nav>
      <a href="https://docs.vibelive.site/">Docs</a>
      <a href="https://docs.vibelive.site/privacy">Privacy</a>
      <a href="https://docs.vibelive.site/terms">Terms</a>
    </nav>
  </div>
</header>

<!-- Mobile TOC -->
<div class="toc-mobile">
  <button class="toc-toggle" id="tocToggle" aria-expanded="false">
    On this page
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
  </button>
  <div class="toc-dropdown" id="tocDropdown"><ol id="tocMobile"></ol></div>
</div>

<!-- Layout -->
<div class="layout">
  <aside class="toc-sidebar">
    <div class="toc-label">On this page</div>
    <ol id="tocDesktop"></ol>
  </aside>
  <article class="content" id="content">
    <div class="loading"><div class="spinner"></div><p>Loading guide&hellip;</p></div>
  </article>
</div>

<!-- Footer -->
<footer class="site-footer"><p>&copy; 2026 VibeLive</p></footer>

<script>
(async () => {
  const GUIDE_URL = '/Integration_Guide.md';
  const contentEl = document.getElementById('content');
  const tocDesktop = document.getElementById('tocDesktop');
  const tocMobile = document.getElementById('tocMobile');

  // Fetch markdown
  let md;
  try {
    const res = await fetch(GUIDE_URL);
    if (!res.ok) throw new Error(res.status);
    md = await res.text();
  } catch (e) {
    contentEl.innerHTML = '<div class="loading"><p>Failed to load guide. <a href="' + GUIDE_URL + '">View raw markdown</a></p></div>';
    return;
  }

  // Configure marked
  marked.setOptions({
    gfm: true,
    breaks: false
  });

  // Render & sanitize
  const rawHtml = marked.parse(md);
  const cleanHtml = DOMPurify.sanitize(rawHtml, { ADD_ATTR: ['target'] });
  contentEl.innerHTML = cleanHtml;

  // ── Process headings: add IDs + anchor links ──
  const headings = contentEl.querySelectorAll('h1, h2, h3');
  const tocItems = [];
  const slugCounts = {};

  headings.forEach(h => {
    let slug = h.textContent.trim()
      .toLowerCase()
      .replace(/[^\w\s-]/g, '')
      .replace(/\s+/g, '-')
      .replace(/-+/g, '-');
    if (slugCounts[slug]) {
      slugCounts[slug]++;
      slug += '-' + slugCounts[slug];
    } else {
      slugCounts[slug] = 1;
    }
    h.id = slug;

    if (h.tagName === 'H2' || h.tagName === 'H3') {
      const anchor = document.createElement('a');
      anchor.className = 'heading-anchor';
      anchor.href = '#' + slug;
      anchor.textContent = '#';
      anchor.setAttribute('aria-label', 'Link to ' + h.textContent);
      h.appendChild(anchor);
      tocItems.push({ id: slug, text: h.textContent.replace(/#$/, '').trim(), level: h.tagName });
    }
  });

  // ── Build TOC ──
  function buildToc(container) {
    container.innerHTML = '';
    tocItems.forEach(item => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = '#' + item.id;
      a.textContent = item.text;
      a.dataset.target = item.id;
      if (item.level === 'H3') a.classList.add('toc-h3');
      li.appendChild(a);
      container.appendChild(li);
    });
  }
  buildToc(tocDesktop);
  buildToc(tocMobile);

  // ── Active TOC highlight ──
  const tocLinks = tocDesktop.querySelectorAll('a');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        tocLinks.forEach(a => a.classList.remove('active'));
        const active = tocDesktop.querySelector('a[data-target="' + entry.target.id + '"]');
        if (active) active.classList.add('active');
      }
    });
  }, { rootMargin: '-80px 0px -75% 0px', threshold: 0 });

  contentEl.querySelectorAll('h2, h3').forEach(h => observer.observe(h));

  // ── Wrap code blocks ──
  contentEl.querySelectorAll('pre').forEach(pre => {
    const code = pre.querySelector('code');
    const wrapper = document.createElement('div');
    wrapper.className = 'code-block';

    const header = document.createElement('div');
    header.className = 'code-block-header';

    // Detect language
    let lang = '';
    if (code && code.className) {
      const match = code.className.match(/language-(\w+)/);
      if (match) lang = match[1];
    }

    const langSpan = document.createElement('span');
    langSpan.className = 'code-block-lang';
    langSpan.textContent = lang || 'code';

    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.textContent = 'Copy';
    copyBtn.addEventListener('click', () => {
      const text = code ? code.textContent : pre.textContent;
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.textContent = 'Copied!';
        copyBtn.classList.add('copied');
        setTimeout(() => {
          copyBtn.textContent = 'Copy';
          copyBtn.classList.remove('copied');
        }, 1500);
      });
    });

    header.appendChild(langSpan);
    header.appendChild(copyBtn);

    pre.parentNode.insertBefore(wrapper, pre);
    wrapper.appendChild(header);
    wrapper.appendChild(pre);
  });

  // ── Mobile TOC toggle ──
  const tocToggle = document.getElementById('tocToggle');
  const tocDropdown = document.getElementById('tocDropdown');
  tocToggle.addEventListener('click', () => {
    const isOpen = tocDropdown.classList.toggle('open');
    tocToggle.classList.toggle('open', isOpen);
    tocToggle.setAttribute('aria-expanded', isOpen);
  });
  tocDropdown.addEventListener('click', e => {
    if (e.target.tagName === 'A') {
      tocDropdown.classList.remove('open');
      tocToggle.classList.remove('open');
      tocToggle.setAttribute('aria-expanded', 'false');
    }
  });
})();
</script>
</body>
</html>
