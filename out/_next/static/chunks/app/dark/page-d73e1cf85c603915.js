(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648,616],{3547:function(e,t,r){Promise.resolve().then(r.bind(r,4248)),Promise.resolve().then(r.bind(r,1715)),Promise.resolve().then(r.bind(r,9295)),Promise.resolve().then(r.bind(r,1591))},4248:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var s=r(7437),n=r(2265);let i=[{svgX:17.2,svgY:32.7},{svgX:29.4,svgY:27.4},{svgX:27.9,svgY:25.7},{svgX:22.5,svgY:39.2},{svgX:29.4,svgY:47.4},{svgX:37.1,svgY:63.1},{svgX:33.8,svgY:69.2},{svgX:50,svgY:21.4},{svgX:50.6,svgY:22.8},{svgX:53.7,svgY:20.8},{svgX:58.1,svgY:27.2},{svgX:60.4,svgY:19},{svgX:58.7,svgY:33.3},{svgX:50.9,svgY:46.4},{svgX:57.8,svgY:64.6},{svgX:65.4,svgY:35.9},{svgX:70.3,svgY:39.4},{svgX:82.3,svgY:27.8},{svgX:85.3,svgY:29.1},{svgX:88.8,svgY:30.2}];function o(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null),r=(0,n.useRef)([]),o=(0,n.useRef)([]),l=(0,n.useRef)([]),c=(0,n.useRef)(0),a=(0,n.useRef)(0),u=(0,n.useRef)([]);return(0,n.useEffect)(()=>{let s;let n=t.current,f=e.current;if(!n||!f)return;let v=f.getContext("2d");if(v){for(let e=0;e<2;e++)i.forEach((t,r)=>{let s=document.createElement("div");s.className="user-dot",s.style.animationDelay=.25*r+"s",n.appendChild(s),o.current.push({el:s,copy:e,cityIdx:r});let i=document.createElement("div");i.className="video-box",i.style.marginTop="-10px",i.innerHTML='<div class="video-box-inner"><div class="video-box-icon"></div><span class="video-box-live">LIVE</span></div>',n.appendChild(i),l.current.push({el:i,copy:e,cityIdx:r})});return d(),window.addEventListener("resize",d),g(),setTimeout(g,800),a.current=performance.now(),s=requestAnimationFrame(function e(t){if(!v||!f)return;let n=t-a.current;a.current=t,c.current+=n,c.current>1500+1500*Math.random()&&(g(),c.current=0),v.clearRect(0,0,f.width,f.height);let i={},l=u.current,d=f.width/2;for(let e=r.current.length-1;e>=0;e--){let t=r.current[e];if(t.life+=n,!t.boxesClosing&&t.life>=.75*t.maxLife&&(t.boxesClosing=!0,m(t.from).forEach(e=>{let{el:t}=e;t.classList.remove("visible"),t.classList.add("closing")}),m(t.to).forEach(e=>{let{el:t}=e;t.classList.remove("visible"),t.classList.add("closing")})),t.life>=t.maxLife){m(t.from).forEach(e=>{let{el:t}=e;return t.classList.remove("visible","closing")}),m(t.to).forEach(e=>{let{el:t}=e;return t.classList.remove("visible","closing")}),r.current.splice(e,1);continue}i[t.from]=!0,i[t.to]=!0;let s=t.life/t.maxLife,o=s<.15?s/.15:s>.75?(1-s)/.25:1;o*=.4;let c=l[t.from],a=l[t.to];if(c&&a)for(let e=0;e<2;e++){let t=e*d,r=t+c.x,s=c.y,n=t+a.x,i=a.y,l=(s+i)/2,u=(r+n)/2-.15*(i-s),f=l+.15*(n-r);v.beginPath(),v.moveTo(r,s),v.quadraticCurveTo(u,f,n,i),v.strokeStyle="rgba(14,165,164,"+o+")",v.lineWidth=1.2,v.stroke()}}o.current.forEach(e=>{let{el:t,cityIdx:r}=e;i[r]?t.classList.add("connected"):t.classList.remove("connected")}),s=requestAnimationFrame(e)}),()=>{cancelAnimationFrame(s),window.removeEventListener("resize",d),o.current.forEach(e=>{let{el:t}=e;return t.remove()}),l.current.forEach(e=>{let{el:t}=e;return t.remove()}),o.current=[],l.current=[],r.current=[]}}function d(){if(!f||!n)return;let e=f.closest(".map-container");if(!e)return;let t=e.clientWidth,r=e.clientHeight,s=.4285*t,c=(r-s)/2;f.width=2*t,f.height=r;let a=[];i.forEach(e=>{let r=e.svgX/100*t,n=c+e.svgY/100*s;a.push({x:r,y:n})}),u.current=a,o.current.forEach(e=>{let{el:r,copy:s,cityIdx:n}=e,i=a[n];r.style.left=s*t+i.x+"px",r.style.top=i.y+"px"}),l.current.forEach(e=>{let{el:r,copy:s,cityIdx:n}=e,i=a[n];r.style.left=s*t+i.x+"px",r.style.top=i.y+"px"})}function m(e){return l.current.filter(t=>t.cityIdx===e)}function g(){if(r.current.length>=3)return;let e=function(){let e=0;for(;e<20;){let t=Math.floor(Math.random()*i.length),s=Math.floor(Math.random()*i.length);if(t===s){e++;continue}if(!r.current.some(e=>e.from===t&&e.to===s||e.from===s&&e.to===t))return{from:t,to:s};e++}return null}();if(!e)return;let t={from:e.from,to:e.to,life:0,maxLife:4e3+3e3*Math.random(),boxesShown:!1,boxesClosing:!1};r.current.push(t),setTimeout(()=>{t.life<t.maxLife&&(m(t.from).forEach(e=>{let{el:t}=e;return t.classList.add("visible")}),m(t.to).forEach(e=>{let{el:t}=e;return t.classList.add("visible")}),t.boxesShown=!0)},500)}},[]),(0,s.jsxs)("div",{className:"map-container",children:[(0,s.jsxs)("div",{className:"world-map",children:[(0,s.jsx)("canvas",{ref:e,className:"map-canvas"}),(0,s.jsx)("div",{ref:t,className:"map-dots-layer"})]}),(0,s.jsx)("div",{className:"map-center-fade"})]})}}},function(e){e.O(0,[367,971,117,744],function(){return e(e.s=3547)}),_N_E=e.O()}]);